document.addEventListener("DOMContentLoaded", (e) => {
  // ADD dialog accordion

  const dialogItem = document.getElementsByClassName("dialogItem");
  const diaHD = document.getElementsByClassName("dialogItemHeading");

  function fullScroll() {
    const dialog = document.querySelectorAll(".dialogItemContent__dialog");
    dialog.forEach((item) => {
      item.scrollTop = item.scrollHeight + 10;
    });
  }

  fullScroll();

  const attachBTN = document.querySelectorAll(
    ".dialogItemContent__appendInput"
  );
  const attachHiddenMenu = document.querySelectorAll(".hiddenAttachMenu");
  const attachImg = document.querySelectorAll(".dialogItemContent__appendImg");
  const attachHiddenMenuBTN = document.querySelectorAll(
    ".hiddenAttachMenu__btn"
  );

  const modalAttachMenu = document.querySelector(".modalAttachMenu");
  attachBTN.forEach((item, index) =>
    item.addEventListener("click", (e) => {
      attachHiddenMenu[index].classList.toggle("visible");
      if(attachHiddenMenu[index].classList.contains('visible')) {
        attachImg[index].setAttribute("src", "./img/svg/img__close.svg");
      } else {
        attachImg[index].setAttribute("src", "./img/svg/img__attach.svg");
      }
    })
  );

  for (let i = 0; i < attachHiddenMenuBTN.length; i++) {
    const item = attachHiddenMenuBTN[i];

    item.addEventListener("click", (e) => {
      modalAttachMenu.classList.toggle("hide");

      const modalSelect = document.querySelector("#modalSelect");
      modalSelect[i].selected = "selected";
    });
  }
  function toggleItem() {
    let itemClass = this.parentNode.className;
    for (i = 0; i < dialogItem.length; i++) {
      dialogItem[i].className = "dialogItem close";
    }

    if (itemClass == "dialogItem close") {
      this.parentNode.className = "dialogItem open";
      fullScroll();
    }
  }
  for (i = 0; i < diaHD.length; i++) {
    diaHD[i].addEventListener("click", toggleItem, false);
  }

  // Accordion SIDEBAR MENU

  const menuItem = document.querySelectorAll(".sidebarListItem"),
    contentItem = document.querySelectorAll(".contentWrapperItem"),
    sidebarList = document.querySelectorAll(".sidebarListItem"); //active

  for (let i = 0; i < menuItem.length; i++) {
    menuItem[i].addEventListener("click", (e) => {
      contentItem.forEach((item) => item.classList.add("hide"));
      contentItem[i].classList.remove("hide");
      sidebarList.forEach(item=> item.classList.remove('active'))
      sidebarList[i].classList.add('active')
    });
  }

  //  MODAL CLOSE
  const modalArrowBTN = document.querySelector(".modal__arrow");
  modalArrowBTN.addEventListener("click", (e) => {
    modalAttachMenu.classList.toggle("hide");
  });

  modalAttachMenu.addEventListener("click", (e) => {
    if (e.target.classList.contains("modalAttachMenu")) {
      modalAttachMenu.classList.toggle("hide");
    }
  });


  const allListItemsLeft = document.querySelectorAll(".sidebarListItem svg path");
  allListItemsLeft.forEach(item => {
    if(item.getAttribute('fill')){
      item.classList.add("pathFill");
    }
  })

  
  

  

});


